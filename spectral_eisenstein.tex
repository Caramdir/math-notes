%type: notes
%title: Spectral Eisenstein series functors
%tags: representation theory, geometric Langlands, local systems
\documentclass[english]{short-notes}

\usepackage{math-alg,math-ag, math-gl}

\addbibresource{global.bib}
%\bibliography{global.bib}


\title{spectral eisenstein series functors}
\author{Clemens Koppensteiner}

\begin{document}

\newcommand\sym{\mathrm{sym}}
\newcommand\STs[2]{\operatorname{ST}(#2,#1)}
\newcommand\STf[2]{\operatorname{ST}_{#2,#1}}

\maketitle

The following is mainly taken from \cite[Section~12]{ArinkinGaitsgory:arXiv:v2:SingularSupport}.

Let $C$ be a curve over a $ℂ$, $G$ a reductive group.
We are interested in the dg category $\catIndCoh{\Loc_G}$ of ind-coherent sheaves on the derived moduli stack of local $G$-systems on $C$.

Let $P$ be a parabolic subgroup of $G$ and $L$ the corresponding Levi.
We write
\[
    p_P\colon \Loc_P → \Loc_G, \qquad q_P\colon \Loc_P → \Loc_L.
\]
The map $p_P$ is schematic and proper and the map $q_P$ is quasi-smooth \cite[Lemma~12.2.2]{ArinkinGaitsgory:arXiv:v2:SingularSupport}.

\begin{Def}
    The \emph{spectral Eisenstein series functor} for $P$ is
    \[
        \Eis_P^G = (p_P)_*^\IndCoh ∘ q_P^!\colon \catIndCoh{\Loc_M} → \catIndCoh{\Loc_G}.
    \]
\end{Def}

The functor $(p_P)_*^\IndCoh$ is defined in \cite[Proposition~3.1.1]{Gaitsgory:preprint:IndcoherentSheaves} and the functor $q_P^!$ exists by \cite[Theorem~5.2.2]{Gaitsgory:preprint:IndcoherentSheaves}.

When the group $G$ is clear from context, we set $\Eis_P = \Eis_P^G$.
If there is only on parabolic $P$, then $p = p_P$, etc.

\begin{Q}
    We are interested in the following questions:
    \begin{itemize}
        \item 
            Let $P$ and $Q$ be two parabolics with equivalents Levis.
            Are the functors $\Eis_P$ and $\Eis_Q$ isomorphic?
            (Compare Proposition~3.1.9 in Sam's thesis.)
        \item 
            Are the images of the $\Eis$ for non-equivalent Levis orthogonal?
    \end{itemize}
\end{Q}

\section*{adjoints}

\begin{Q}
    Does the functor $\Eis$ have adjoints?
\end{Q}

\begin{Rem}\leavevmode
    \begin{itemize}
        \item $p_*^\IndCoh$ has the right adjoint $p^!$ \cite[3.3.7]{Gaitsgory:preprint:IndcoherentSheaves}.
        \item There is an adjunction $(q^{\IndCoh,*},q_*^\IndCoh)$ \cite[Corollary~1.2.5]{ArinkinGaitsgory:arXiv:v2:SingularSupport}.
        \item For general maps, $q^!$ does not need to be adjoint to $q_*^\IndCoh$.
        \item Possibly \cite[Proposition~5.4.2]{Gaitsgory:preprint:IndcoherentSheaves} (compatibility with adjunction for proper maps) can help.
    \end{itemize}
\end{Rem}

\begin{Prop}[{\cite[Corollary~12.2.3]{ArinkinGaitsgory:arXiv:v2:SingularSupport}}]
    The functor $\Eis_P$ sends $\catCoh{\Loc_M}$ to $\catCoh{\Loc_G}$.
\end{Prop}

\begin{Cor}
    $\Eis_P^G$ has a (continuous) right adjoint.
    We will denote it by $\CT_P^G = \CT_P$ (for \emph{spectral constant term functor}).
\end{Cor}

\begin{proof}
    The functor $\Eis$ is continuous, so by the adjoint functor theorem \cite[Corollay~5.5.2.9]{Lurie:2009:HigherToposTheory} it has a right adjoint.
    By \cite[Proposition~5.5.7.2]{Lurie:2009:HigherToposTheory}, the right adjoint is continuous.
\end{proof}

\begin{Q}
    Is $\CT$ also a left adjoint?
\end{Q}

\begin{Q}
    How does $\CT$ differ from $q_*^\IndCoh ∘ p^!$?
\end{Q}

This question might be reduced with the following steps:
\begin{itemize}
    \item How does $q_*^\IndCoh$ differ from the right adjoint of $q^!$ (which must exist for the same reasons as $\CT$)?
    \item How does $q^!$ differ from $q^{\IndCoh,*}$ (the left adjoint to $q_*^\IndCoh$)?
    \item Since $q^! = q^{\mathrm{QCoh},!}(\O_{\Loc_L}) \otimes q^{\IndCoh,*}$: what is $q^{\mathrm{QCoh},!}(\O_{\Loc_L})$?
    \item Maybe making the proof of \cite[Lemma~12.2.2]{ArinkinGaitsgory:arXiv:v2:SingularSupport} explicit leads to nicer properties of $q$? See also \cite[Proposition~9.4.5]{ArinkinGaitsgory:arXiv:v2:SingularSupport}.
\end{itemize}

Let $\sheaf K_P^\dual$ denote the dual of $q_P^{\mathrm{QCoh},!}(\O_{\Loc_L})$ (in $\catQCoh{\Loc_P}$).

\begin{Lem}
    The functor $\CT_P$ is equal to
    \[
        \sheaf F \mapsto q_*^\IndCoh(\sheaf K_P^\dual \otimes p^!(\sheaf F)).
    \]
\end{Lem}

\begin{Rem}%
    \label{rem:symmetric}%
    Assume there exists $\sheaf L ∈ \catIndCoh{\Loc_P}$ such that $\sheaf K = \sheaf L \otimes \sheaf L$ (such $\sheaf L$ does not need to exist in general; for example if $\sheaf K$ is in odd degree).
    Then setting $\Eis(\sheaf F) = p_*^\IndCoh(\sheaf L^\dual \otimes q^!(\sheaf F))$ yields the much more symmetric $\CT(\sheaf G) = q_*^\IndCoh(\sheaf L^\dual \otimes p^!(\sheaf G))$.
    It would also ensure that $\Eis ∘ {\mathbb D} = \mathbb D ∘ \Eis$, at least on $\cat{Coh}$ (see~\cite[Corollary~9.5.9]{Gaitsgory:preprint:IndcoherentSheaves}).

    Of course, it would be even better if $\sheaf K = \sheaf L = \O_{\Loc_P}$.
\end{Rem}

\begin{Notation}%
    There are several different ways to define the Eisenstein series functor (and consequently the constant term functor).
    We will use the following notation:
    \begin{itemize}
        \item $\Eis = \Eis^! = p_*^\IndCoh ∘ q^!$ with $\CT = \CT^! = q_*^\IndCoh(\sheaf K_P^\dual \otimes p^!({-}))$.
            This variant is used in \cite{ArinkinGaitsgory:arXiv:SingularSupport}.
        \item $\Eis^* = p_*^\IndCoh ∘ q^*$ with $\CT^* = q_*^\IndCoh ∘ p^!$.
            This variant is used in \cite{Gaitsgory:preprint:OutlineOfGLCForGL2} and denoted simply $\Eis_{\mathrm{spec}}$ there.
        \item $\Eis^\sym$ and $\CT^\sym$ for the versions defined in Remark~\ref{rem:symmetric} (if existing).
    \end{itemize}
    Analogous notation is applied for functors derived from these.
\end{Notation}

\section*{the \enquote{steinberg functor}}

In this section let $P$ and $Q$ be two parabolic subgroups of $G$ with Levis $L$ and $M$ respectively.

\begin{Def}
    The \emph{spectral Steinberg functor} is
    \[
        \STf P Q = \CT_Q ∘ \Eis_P \colon \catIndCoh{\Loc_L} → \catIndCoh{\Loc_M}.
    \]
    The \emph{spectral Steinberg stack} is
    \[ 
        \STs P Q =
        \Loc_P ×_{\Loc G} \Loc_Q.
    \]
    The two projections from $\STs P Q$ will be denoted by $π_P$ and $π_Q$.
    Further, let $α_P = q_P ∘ π_P$ and analogously $α_Q$.
\end{Def}

\begin{Cor}
    \[
        \STf P Q ({-}) = 
        (α_Q)_*^\IndCoh \bigl( π_Q^*(\sheaf K_Q^\dual) \otimes α_P^!({-})\bigr).
    \]
\end{Cor}

\begin{proof}
    \begin{align*}
        \CT_Q ∘ \Eis_P (\sheaf F) &=
        (q_Q)_*^\IndCoh\biggl( \sheaf K_Q^\dual \otimes \bigl( p_Q^! ∘ (p_P)_*^\IndCoh ∘ q_P^!(\sheaf F)\bigr)\biggr) \\ & =
        (q_Q)_*^\IndCoh\biggl( \sheaf K_Q^\dual \otimes \bigl( (π_Q)_*^\IndCoh ∘ π_P^! ∘ q_P^!(\sheaf F)\bigr)\biggr) \\ & =
        (α_Q)_*^\IndCoh \bigl( π_Q^*(\sheaf K_Q^\dual) \otimes α_P^!(\sheaf F)\bigr),
    \end{align*}
    where the first equality is (proper) base change and the second one the compatibility of the pushforward with the action of $\cat{QCoh}$.
\end{proof}

\begin{Rem}
    In the symmetric situation of Remark~\ref{rem:symmetric}, one gets
    \[
        \STf P Q ^\sym =
        \CT^\sym_Q ∘ \Eis^\sym_P ({\cdot}) = 
        (α_Q)_*^\IndCoh \biggl( \bigl( π_Q^*(\sheaf L_Q^\dual) \otimes π_P^*(\sheaf L_P^\dual) \bigr) \otimes α_P^!({\cdot})\biggr)
    \]
\end{Rem}

\begin{Q}
    Is
    \[
        \sheaf K_Q^\dual =
        \mathbb D_{\Loc_Q}^{\mathrm{naive}} q_Q^{\mathrm{QCoh},!}(\O_{\Loc_M}) =
        q_Q^* (\mathbb D_{\Loc_M}^{\mathrm{naive}}\O_{\Loc_M}),
    \]
    and hence
    \[
        π_Q^*(\sheaf K_Q^\dual) =
        α_Q^*(\mathbb D_{\Loc_M}^{\mathrm{naive}}\O_{\Loc_M})?
    \]
    Further, is $\mathbb D_{\Loc_M}^{\mathrm{naive}}\O_{\Loc_M} = \O_{\Loc_M}$?
\end{Q}

\begin{Q}
    Does $\STs P Q$ have a natural (equidimensional) stratification?
\end{Q}

\subsection*{a \texorpdfstring{$G$}{G}-equivariant formulation}

Let $[P] \cong G/P$ denote the partial flag variety corresponding to the parabolic $P$, i.e.~the set of all conjugates of $P$.

We consider the \enquote{Betti version} of the moduli of local systems.
Let $\Loc_G'$ be the non-stacky moduli.
If $X$ is an elliptic curve this is the (derived) fiber product $\{1\} ×_G G²$ (with $[{,}]\colon G² → G$).
By definition, $\Loc_G = \rquot{\Loc_G'}G$.

\begin{Def}
    Let $\Loc_{[P]}'$ be the dg scheme over $[P]$ with fibers $\Loc_{P'}'$ over $P' ∈ [P]$.
\end{Def}

\begin{Q}
    How to define/construct this in a formally correct way?
\end{Q}

\begin{Claim}
    There is a canonical isomorphism of derived stacks $\Loc_P \cong \rquot{\smash{\Loc_{[P]}'}}G$.
\end{Claim}

We set 
\[
    \Loc_{[P∩Q]}' = \Loc_{[P]}' ×_{\Loc_G'} \Loc_{[Q]}'.
\]
Informally, this is the dg scheme over $[P] × [Q]$ with fibers $\Loc_{P'∩Q'}$ over $(P',Q') ∈ [P]×[Q]$.

\begin{Claim}
    There is a canonical isomorphism of derived stacks $\STs P Q \cong \rquot{\smash{\Loc_{[P∩Q]}'}}G$.
\end{Claim}

Note that the $G$-orbits on $[P]×[Q]$ are indexed by ${}_QW_P = \dquot{W_Q}{W}{W_P}$.
Thus orbits on $[P]×[Q]$ induce a stratification of $\Loc_{[P∩Q]}'$ indexed by $_QW_P$, and hence one of $\STs P Q$.
The strata are denoted $\STs P Q _w$

\begin{Conjecture}
    The strata are equidimensional.
\end{Conjecture}

\begin{Q}
    Can the stratification of $\STs P Q$ be obtained without the detour through $\Loc'$?
    How to obtain a stratification for the \enquote{de Rham moduli stack}?
\end{Q}

Next we should define functors ${\STf P Q} _w\colon \catIndCoh{\Loc_L} → \catIndCoh{\Loc_M}$ given by restriction of $α$ and $β$ to $\STs P Q _w$.
This is an obvious definition for $\STf P Q ^*$, but in the ${}^!$-version we need to tensor with a line bundle too.

\begin{Q}
    Do the functors ${\STf P Q}_w$ respect nilpotent singular support?    
\end{Q}

\begin{Q}
    Is $\STf P Q = \bigoplus_w {\STf P Q}_w$?
\end{Q}

\printbibliography
\end{document}
